window.KMDApi=class KMDApi{KMD_BUILD="0.1";KMD_SCRIPT_URL="";KMD_SCRIPT="";KMD_HOOKS=[];KMD_LOCK=[];SetScript(t){this.KMD_SCRIPT_URL=t}ExecuteScript(){if(this.KMD_SCRIPT in this.KMD_LOCK)return;this.KMD_LOCK.push(this.KMD_SCRIPT);let t=Function(this.KMD_SCRIPT);t()}AddHook(t,e,i){this.KMD_HOOKS.push(Object.freeze({type:t,target:e,injection:i}))}PatchScript(){fetch(this.KMD_SCRIPT_URL).then(t=>t.text()).then((function(t){this.KMD_HOOKS.forEach(function(e){switch(e.type){case"TEXT_HOOK":t=t.replaceAll(e.target,e.injection);break;case"PROP_HOOK":Object.defineProperty(Object.prototype,e.target,{get:()=>e.injection,set(t){}});break;case"SET_HOOK":Object.prototype[e.target]=e.injection;break;case"GLOBAL_HOOK":window[e.target]=e.injection}}),this.KMD_SCRIPT=t,this.ExecuteScript()}).bind(this))}constructor(){if("GM_info"in window&&"KMD_LATEST"in GM_info)throw TypeError("KMD Versions Mismatch")}}
